package nodeutilization

import (
	"encoding/json"
	"fmt"
	"testing"
)



func TestNewServiceClient(t *testing.T) {
	json_S := `{"timestamp":1630316963,"window":{"duration":"15m","start":1630316063,"end":1630316963},"source":"Prometheus","data":{"NodeMetricsMap":{"dev-k8s097179.cn-hz.aliyun":{"metrics":[{"name":"instance:node_cpu:ratio","type":"CPU","operator":"AVG","rollup":"15m","value":6.364069122897989},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"AVG","rollup":"15m","value":62.60524063426117},{"name":"instance:node_cpu:ratio","type":"CPU","operator":"STD","rollup":"15m","value":0.11993926852847181},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"STD","rollup":"15m","value":0.2119190007493371}],"tags":{},"metadata":{"dataCenter":""}},"dev-k8s097180.cn-hz.aliyun":{"metrics":[{"name":"instance:node_cpu:ratio","type":"CPU","operator":"AVG","rollup":"15m","value":9.759398423308296},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"AVG","rollup":"15m","value":64.42630517559704},{"name":"instance:node_cpu:ratio","type":"CPU","operator":"STD","rollup":"15m","value":0.09003767895881525},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"STD","rollup":"15m","value":0.1922589707293212}],"tags":{},"metadata":{"dataCenter":""}},"dev-k8s097183.cn-hz.aliyun":{"metrics":[{"name":"instance:node_cpu:ratio","type":"CPU","operator":"AVG","rollup":"15m","value":34.31644297693543},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"AVG","rollup":"15m","value":84.11027157841656},{"name":"instance:node_cpu:ratio","type":"CPU","operator":"STD","rollup":"15m","value":0.1536476305057505},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"STD","rollup":"15m","value":0.13914265396582978}],"tags":{},"metadata":{"dataCenter":""}},"dev-k8s097184.cn-hz.aliyun":{"metrics":[{"name":"instance:node_cpu:ratio","type":"CPU","operator":"AVG","rollup":"15m","value":35.17836647690262},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"AVG","rollup":"15m","value":85.27938356234003},{"name":"instance:node_cpu:ratio","type":"CPU","operator":"STD","rollup":"15m","value":0.8215289985005478},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"STD","rollup":"15m","value":0.0652405951427187}],"tags":{},"metadata":{"dataCenter":""}},"dev-k8s097185.cn-hz.aliyun":{"metrics":[{"name":"instance:node_cpu:ratio","type":"CPU","operator":"AVG","rollup":"15m","value":24.64186372748076},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"AVG","rollup":"15m","value":79.3167513740565},{"name":"instance:node_cpu:ratio","type":"CPU","operator":"STD","rollup":"15m","value":0.5353781318734042},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"STD","rollup":"15m","value":0.5395357012853694}],"tags":{},"metadata":{"dataCenter":""}},"dev-k8s097178.cn-hz.aliyun":{"metrics":[{"name":"instance:node_cpu:ratio","type":"CPU","operator":"AVG","rollup":"15m","value":6.187220701904574},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"AVG","rollup":"15m","value":52.51017156438033},{"name":"instance:node_cpu:ratio","type":"CPU","operator":"STD","rollup":"15m","value":0.050709214042852675},{"name":"instance:node_memory_utilisation:ratio","type":"Memory","operator":"STD","rollup":"15m","value":0.38522972690556545}],"tags":{},"metadata":{"dataCenter":""}}}}}`
	err := json.Unmarshal([]byte(json_S), &WatcherMetrics{})
	if err != nil {
		fmt.Println(err)
	}
}
